# PostgreSQL Configuration for Gaming Platform (Development)
# Based on PostgreSQL 15

# Connection Settings
listen_addresses = '*'
max_connections = 200
superuser_reserved_connections = 3

# Memory Settings (adjust based on your system)
shared_buffers = 256MB              # 25% of system RAM for production
effective_cache_size = 1GB          # 50-75% of system RAM
work_mem = 4MB                      # Per-operation memory
maintenance_work_mem = 64MB         # For VACUUM, CREATE INDEX, etc.

# Write-Ahead Log (WAL) Settings
wal_level = replica                 # Enables replication
max_wal_size = 2GB
min_wal_size = 80MB
wal_buffers = 16MB

# Query Planner
random_page_cost = 1.1              # For SSD storage
effective_io_concurrency = 200      # For SSD storage

# Logging (verbose for development)
logging_collector = on
log_destination = 'stderr'
log_directory = 'log'
log_filename = 'postgresql-%Y-%m-%d_%H%M%S.log'
log_rotation_age = 1d
log_rotation_size = 100MB
log_line_prefix = '%m [%p] %u@%d '
log_timezone = 'UTC'

# Slow query logging (development)
log_min_duration_statement = 1000   # Log queries slower than 1 second
log_statement = 'mod'               # Log DDL statements

# Lock Management
deadlock_timeout = 1s
max_locks_per_transaction = 64

# Performance Monitoring
shared_preload_libraries = 'pg_stat_statements'
pg_stat_statements.track = all
pg_stat_statements.max = 10000

# Timezone
timezone = 'UTC'